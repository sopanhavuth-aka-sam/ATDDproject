<!DOCTYPE html>
<html>
<head>
    <title>ATDD</title>

	<meta charset="utf-8">
	

    <link href="Metro-UI-CSS-master/docs/css/metro.css" rel="stylesheet">
    <link href="Metro-UI-CSS-master/docs/css/metro-icons.css" rel="stylesheet">
    <link href="Metro-UI-CSS-master/docs/css/metro-responsive.css" rel="stylesheet">
    <link href="Metro-UI-CSS-master/docs/css/metro-schemes.css" rel="stylesheet">
    <link href="Metro-UI-CSS-master/docs/css/docs.css" rel="stylesheet">
	<link href='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.css' rel='stylesheet' />
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
	<link href="leaflet.timeline.min.css" rel="stylesheet">
	

    <script src="Metro-UI-CSS-master/docs/js/jquery-2.1.3.min.js"></script>
    <script src="Metro-UI-CSS-master/docs/js/metro.js"></script>
    <script src="Metro-UI-CSS-master/docs/js/docs.js"></script>
    <script src="Metro-UI-CSS-master/docs/js/prettify/run_prettify.js"></script>
    <script src="Metro-UI-CSS-master/docs/js/ga.js"></script>
	<script src="select2-4.0.0-beta.2/dist/js/select2.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.js'></script>
	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
	<script src="leaflet.timeline.min.js"></script>

	<style>
			
		#map { 
			position:absolute; 
			top:0;
			bottom:0; 
			width:75%; 
		}
		
		#nav {
			position: absolute;
			right: 0;
		    background-color:#eeeeee;
			width:25%;
			height:50%;
			border: 0.5px solid #eeeeee;
		}
	
		#details{
			position: absolute;
			bottom: 0;
			right: 0;
			background-color: black;
			width:25%;
			height:50%;
			color: white;
			text-align: center;
			border: 0.5px solid black;
			
		}	
	</style>
</head>

<body>
	<div id = "map">
		<script>
		
			//Setting up the map layer
			var osmUrl = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
			var osmAttrib = '&copy; <a href="http://openstreetmap.org/copyright">' +
			'OpenStreetMap</a> contributors';
			var osm = L.tileLayer(osmUrl, {
				maxZoom: 18,
				attribution: osmAttrib,
				noWrap: true
			});
			var map = L.map('map', {
				layers: [osm],
				center: new L.LatLng(0,0),
				zoom: 3,
				maxBounds: [[90,-180], [-90, 180]]
			});
			//End: map layer
			

			function eqfeed_callback(data) {
	
						var time;
						var startTime;
						var getInterval = function(quake) {
						  // earthquake data only has a time, so we'll use that as a "start"
						  // and the "end" will be that + some value based on magnitude
						  // 18000000 = 30 minutes, so a quake of magnitude 5 would show on the
						  // map for 150 minutes or 2.5 hours
							//time = quake.properties["Date and Time (UTC)"].replace(/\s+/g, 'T');
							time = quake.properties["Date and Time (UTC)"];
							time = time.concat(":00");
							startTime = new Date(time);
							console.log(startTime + " " + startTime.getTime());
							return {
								start: startTime.getTime(),
								end:   startTime.getTime() + 80000000
							};
						};
					
				//Setting up timeLineControl
				var timelineControl = L.timelineSliderControl({
					formatOutput: function(date) {
						return new Date(date).toString();
					}
				});
				//End: timeLineControl
				
				//Setting up timeLine
				var timeline = L.timeline(data, {
					getInterval: getInterval,
					pointToLayer: function(data, latlng){
						var hue_min = 120;
						var hue_max = 0;
						//var hue = data.properties.mag / 10 * (hue_max - hue_min) + hue_min;
						var hue = 100;
						return L.circleMarker(latlng, {
						  //radius: data.properties.mag * 3,
						  radius: 25,
						  color: "hsl("+hue+", 100%, 50%)",
						  fillColor: "hsl("+hue+", 100%, 50%)"
						}).bindPopup('hello');
					}
				});
				//End: timeline
				
				//add timelineControl and timeline to the map
				timelineControl.addTo(map);
				timelineControl.addTimelines(timeline);
				timeline.addTo(map);
			}
			
		</script>
		<script src="detection-1000.geojson"></script>
	</div>

	<!--input requirement section-->
	<div id = "nav">
		<div class = "grid">
			<div class = "row cells2">
				<!--species drop downmenu-->
				<div class = "cell">
				
				
				
						<select class = "slct1 full-size" >
			
	
						</select>
						
						
						
						
				</div>
				<!--individual selection dropdown menu-->
				<div class = "cell">
					<div class="input-control full-size" data-role="select" data-placeholder="Select individual." data-allow-clear="true">
						<select class="full-size">
			
						</select>
					</div>

				</div>
			</div>
		</div>
		<!--radio buttons-->
		<div data-role="group" data-group-type="one-state">
			<button class="button">All</button>
			<button class="button">Individual</button>
		</div>
		<!--start date and end date datepicker calendars-->
		<div class="grid">
			<div class="row cells2">
				<div class="cell">
					<h5>Start Date</h5>
					<div class="input-control text" data-role="datepicker" data-date="1972-12-21" data-format="mmmm d, yyyy">
						<input type="text">
						<button class="button"><span class="mif-calendar"></span></button>
					</div>
				</div>
				<div class="cell">
					<h5>End Date</h5>
					<div class="input-control text" data-role="datepicker" data-date="1972-12-21" data-format="mmmm d, yyyy">
						<input type="text">
						<button class="button"><span class="mif-calendar"></span></button>
					</div>
				</div>
			</div>
		</div>
	</div>
	

	<div id = "details">
		<h1>Details go here.</h1>
	</div>



</body>
</html>